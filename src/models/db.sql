
CREATE TABLE PERSONA (
    PERS_ID_PERSONA int(11) NOT NULL,
    PERS_DNI int(11) NOT NULL,
    PERS_NOMBRE1 varchar(50) NOT NULL,
    PERS_NOMBRE2 varchar(50) DEFAULT NULL,
    PERS_APELLIDO1 varchar(60) NOT NULL,
    PERS_APELLIDO2 varchar(60) DEFAULT NULL,
    PERS_GENERO varchar(20) NOT NULL,
    PERS_CORREO varchar(150) NOT NULL,
    USUR_ID_USUARIO int(11) NOT NULL,
    TIID_ID_TIPOID int(11) NOT NULL
);

CREATE TABLE TIPOIDENTIFICACION (
    TIID_ID_TIPOID int(11) NOT NULL,
    TIID_NOMBRE_TIPOID varchar(50) NOT NULL
);

CREATE TABLE USUARIO (
    USUR_ID_USUARIO int(11) NOT NULL,
    USUR_NICKNAME varchar(100) NOT NULL,
    USUR_PASSWORD varchar(100) NOT NULL,
    FOTO_IDFOTO INT
);

CREATE TABLE ROL (
    ROLL_ID_ROL int(11) NOT NULL,
    ROLL_NOMBREROL varchar(50) NOT NULL
);

CREATE TABLE ROLUSUARIO (
    ROUS_IDROLUSURARIO INT NOT NULL,
    ROLL_ID_ROL int(11) NOT NULL,
    USUR_ID_USUARIO int(11) NOT NULL,
    ROUS_ESTADO VARCHAR(15) NOT NULL
);

-- PRIMARY KEYS
ALTER Table
    PERSONA
ADD CONSTRAINT pk_id_persona PRIMARY KEY (PERS_ID_PERSONA);
ALTER Table
    TIPOIDENTIFICACION
ADD CONSTRAINT pk_id_tipo PRIMARY KEY (TIID_ID_TIPOID);

ALTER Table
    USUARIO
ADD CONSTRAINT pk_id_usuario PRIMARY KEY (USUR_ID_USUARIO);

ALTER Table
    ROL
ADD CONSTRAINT pk_id_rol PRIMARY KEY (ROLL_ID_ROL);

ALTER TABLE
    ROLUSUARIO
ADD CONSTRAINT pk_id_usuariorol PRIMARY KEY (ROUS_IDROLUSURARIO, USUR_ID_USUARIO, ROLL_ID_ROL);


-- FOREIGN KEY
ALTER Table
    PERSONA
ADD CONSTRAINT fk_USUR_ID_USUARIO FOREIGN KEY (USUR_ID_USUARIO) REFERENCES USUARIO (USUR_ID_USUARIO) ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER Table
    PERSONA
ADD CONSTRAINT fk_tipoid FOREIGN KEY (TIID_ID_TIPOID) REFERENCES TIPOIDENTIFICACION (TIID_ID_TIPOID) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE
    ROLUSUARIO
ADD CONSTRAINT fk_rol FOREIGN KEY (ROLL_ID_ROL) REFERENCES ROL (ROLL_ID_ROL) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE
    ROLUSUARIO
ADD CONSTRAINT fk_usuario FOREIGN KEY (USUR_ID_USUARIO) REFERENCES USUARIO (USUR_ID_USUARIO) ON DELETE NO ACTION ON UPDATE NO ACTION;